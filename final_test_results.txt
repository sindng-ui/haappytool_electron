
 RUN  v4.0.15 K:/Antigravity_Projects/gitbase/happytool_electron

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should initialize and spawn workers
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should initialize and spawn workers
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle Tizen connection start (sdb)
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle Tizen connection start (sdb)
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should BUFFER log_data for 500ms before sending to worker
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should BUFFER log_data for 500ms before sending to worker
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should FLUSH IMMEDIATELY if buffer exceeds limit (>2000 items)
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should FLUSH IMMEDIATELY if buffer exceeds limit (>2000 items)
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should reset state on disconnect
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should reset state on disconnect
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle SSH Error event
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m
[useLog] SSH Connected. Stream should start automatically via Server.
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle SSH Auth Request and Response
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m
[useLog] SSH Connected. Stream should start automatically via Server.
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle logical disconnect (sdb_status)
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle logical disconnect (sdb_status)
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should load logViewPreferences from DB on mount
[useLog] Mounting tab test-tab. initialFilePath: [90mundefined[39m

stdout | test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should load logViewPreferences from DB on mount
[useLog] Raw saved state for test-tab: [1mnull[22m
[useLog] Final targetPath: [90mundefined[39m

 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should initialize and spawn workers 10ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle Tizen connection start (sdb) 3ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should BUFFER log_data for 500ms before sending to worker 3ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should FLUSH IMMEDIATELY if buffer exceeds limit (>2000 items) 2ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should reset state on disconnect 2ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle SSH Error event 2ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle SSH Auth Request and Response 1ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should handle logical disconnect (sdb_status) 1ms
 ??test/hooks/useLogExtractorLogic.test.tsx > useLogExtractorLogic (Frontend Logic) > should load logViewPreferences from DB on mount 71ms
stdout | test/server_socket.test.js
[dotenv@17.2.3] injecting env (0) from .env -- tip: ?ë±» add observability to secrets: https://dotenvx.com/ops


ç‡§ë‰›íˆ˜  [START TEST] "should execute default command (dlogutil -v kerneltime) if none provided"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'test-device',
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -v kerneltime $(TAGS)',
  tags: []
}
[SDB] Substituted $(TAGS) -> ""
[SDB] Effective command: dlogutil -v kerneltime 
[SDB] Using custom command: dlogutil -v kerneltime 
[SDB] Final sdb args: [ '-s', 'test-device', 'shell', 'dlogutil', '-v', 'kerneltime' ]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
ç‡§ë†…íˆ˜  [END TEST]   "should execute default command (dlogutil -v kerneltime) if none provided"


ç‡§ë‰›íˆ˜  [START TEST] "should execute user provided command (e.g. ls -al)"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'test-device',
  debug: undefined,
  saveToFile: undefined,
  command: 'ls -al',
  tags: []
}
[SDB] Killing existing SDB process...
[SDB] Using custom command: ls -al
[SDB] Final sdb args: [ '-s', 'test-device', 'shell', 'ls', '-al' ]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
ç‡§ë†…íˆ˜  [END TEST]   "should execute user provided command (e.g. ls -al)"


ç‡§ë‰›íˆ˜  [START TEST] "should execute complex user provided command (e.g. ps -ef | grep process)"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'test-device',
  debug: undefined,
  saveToFile: undefined,
  command: 'ps -ef | grep process',
  tags: []
}
[SDB] Killing existing SDB process...
[SDB] Using custom command: ps -ef | grep process
[SDB] Final sdb args: [ '-s', 'test-device', 'shell', 'ps', '-ef', '|', 'grep', 'process' ]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
ç‡§ë†…íˆ˜  [END TEST]   "should execute complex user provided command (e.g. ps -ef | grep process)"


ç‡§ë‰›íˆ˜  [START TEST] "should substitute $(TAGS) with space-joined tags in SDB command"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'test-device',
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil $(TAGS) kerneltime',
  tags: [ '-v', 'threadtime', 'InputManager' ]
}
[SDB] Substituted $(TAGS) -> "-v threadtime InputManager"
[SDB] Effective command: dlogutil -v threadtime InputManager kerneltime
[SDB] Killing existing SDB process...
[SDB] Using custom command: dlogutil -v threadtime InputManager kerneltime
[SDB] Final sdb args: [
  '-s',
  'test-device',
  'shell',
  'dlogutil',
  '-v',
  'threadtime',
  'InputManager',
  'kerneltime'
]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
ç‡§ë†…íˆ˜  [END TEST]   "should substitute $(TAGS) with space-joined tags in SDB command"


ç‡§ë‰›íˆ˜  [START TEST] "should apply tags to DEFAULT SDB command if no command provided"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'test-device',
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -v kerneltime $(TAGS)',
  tags: [ 'AudioPolicy' ]
}
[SDB] Substituted $(TAGS) -> "AudioPolicy"
[SDB] Effective command: dlogutil -v kerneltime AudioPolicy
[SDB] Killing existing SDB process...
[SDB] Using custom command: dlogutil -v kerneltime AudioPolicy
[SDB] Final sdb args: [
  '-s',
  'test-device',
  'shell',
  'dlogutil',
  '-v',
  'kerneltime',
  'AudioPolicy'
]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
ç‡§ë†…íˆ˜  [END TEST]   "should apply tags to DEFAULT SDB command if no command provided"


ç‡§ë‰›íˆ˜  [START TEST] "should emit log_data when process writes to stdout"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'test-device',
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -v kerneltime $(TAGS)',
  tags: []
}
[SDB] Substituted $(TAGS) -> ""
[SDB] Effective command: dlogutil -v kerneltime 
[SDB] Killing existing SDB process...
[SDB] Using custom command: dlogutil -v kerneltime 
[SDB] Final sdb args: [ '-s', 'test-device', 'shell', 'dlogutil', '-v', 'kerneltime' ]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
[SDB] ??First stdout data received: 15 bytes
[SDB] First stdout preview: Sample Log Line
ç‡§ë†…íˆ˜  [END TEST]   "should emit log_data when process writes to stdout"


ç‡§ë‰›íˆ˜  [START TEST] "should emit sdb_error when process encounters error"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'test-device',
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -v kerneltime $(TAGS)',
  tags: []
}
[SDB] Substituted $(TAGS) -> ""
[SDB] Effective command: dlogutil -v kerneltime 
[SDB] Killing existing SDB process...
[SDB] Using custom command: dlogutil -v kerneltime 
[SDB] Final sdb args: [ '-s', 'test-device', 'shell', 'dlogutil', '-v', 'kerneltime' ]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
stderr | test/server_socket.test.js > Server Socket Connection > SDB Connection > should emit sdb_error when process encounters error
[SDB] ??Process error: Error: Command not found
    at K:/Antigravity_Projects/gitbase/happytool_electron/test/server_socket.test.js:146:40
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1206:10)
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1650:37
    at Traces.$ (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)
    at runTest (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1650:12)
[SDB] Error details: {
  message: 'Command not found',
  code: undefined,
  errno: undefined,
  syscall: undefined
}

ç‡§ë†…íˆ˜  [END TEST]   "should emit sdb_error when process encounters error"


ç‡§ë‰›íˆ˜  [START TEST] "should kill existing process before starting new one"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'dev1',
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -v kerneltime $(TAGS)',
  tags: []
}
[SDB] Substituted $(TAGS) -> ""
[SDB] Effective command: dlogutil -v kerneltime 
[SDB] Killing existing SDB process...
[SDB] Using custom command: dlogutil -v kerneltime 
[SDB] Final sdb args: [ '-s', 'dev1', 'shell', 'dlogutil', '-v', 'kerneltime' ]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 1234
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
[SDB] ========== SDB Connection Request ==========
[SDB] Connection initiated with params: {
  deviceId: 'dev2',
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -v kerneltime $(TAGS)',
  tags: []
}
[SDB] Substituted $(TAGS) -> ""
[SDB] Effective command: dlogutil -v kerneltime 
[SDB] Killing existing SDB process...
[SDB] Using custom command: dlogutil -v kerneltime 
[SDB] Final sdb args: [ '-s', 'dev2', 'shell', 'dlogutil', '-v', 'kerneltime' ]
[SDB] Spawning sdb process...
[SDB] ??Process spawned successfully, PID: 5678
[SDB] Emitting connected status...
[SDB] All event listeners attached, waiting for data...
ç‡§ë†…íˆ˜  [END TEST]   "should kill existing process before starting new one"


ç‡§ë‰›íˆ˜  [START TEST] "should execute default command (dlogutil -v kerneltime) if none provided"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SSH] ========== SSH Connection Request ==========
[SSH] Connection initiated with params: {
  host: '1.2.3.4',
  port: 22,
  username: 'root',
  passwordProvided: true,
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -c;logger-mgr --filter $(TAGS); dlogutil -v kerneltime $(TAGS) &',
  tags: []
}
[SSH] Substituted $(TAGS) -> ""
[SSH] Effective command: dlogutil -c;logger-mgr --filter ; dlogutil -v kerneltime  &
[SSH] Killing existing SDB process to prevent duplicates...
[SSH] Creating SSH client...
[SSH] Connection attempt started...
[SSH] ??SSH connection ready, requesting shell...
[SSH] ??Shell created successfully
[SSH] Using custom command: dlogutil -c;logger-mgr --filter ; dlogutil -v kerneltime  &
[SSH] Writing command to stream: dlogutil -c;logger-mgr --filter ; dlogutil -v kerneltime  &
[SSH] Command sent, waiting for log data...
ç‡§ë†…íˆ˜  [END TEST]   "should execute default command (dlogutil -v kerneltime) if none provided"


ç‡§ë‰›íˆ˜  [START TEST] "should execute user provided command (e.g. tail -f ...)"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SSH] ========== SSH Connection Request ==========
[SSH] Connection initiated with params: {
  host: '1.2.3.4',
  port: undefined,
  username: 'testuser',
  passwordProvided: false,
  debug: undefined,
  saveToFile: undefined,
  command: 'tail -f /var/log/messages',
  tags: []
}
[SSH] Closing existing SSH connection...
[SSH] Creating SSH client...
[SSH] Connection attempt started...
[SSH] ??SSH connection ready, requesting shell...
[SSH] ??Shell created successfully
[SSH] Using custom command: tail -f /var/log/messages
[SSH] Writing command to stream: tail -f /var/log/messages
[SSH] Command sent, waiting for log data...
ç‡§ë†…íˆ˜  [END TEST]   "should execute user provided command (e.g. tail -f ...)"


ç‡§ë‰›íˆ˜  [START TEST] "should execute arbitrary user provided command (e.g. top)"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SSH] ========== SSH Connection Request ==========
[SSH] Connection initiated with params: {
  host: '1.2.3.4',
  port: undefined,
  username: 'testuser',
  passwordProvided: false,
  debug: undefined,
  saveToFile: undefined,
  command: 'top -n 1',
  tags: []
}
[SSH] Closing existing SSH connection...
[SSH] Creating SSH client...
[SSH] Connection attempt started...
[SSH] ??SSH connection ready, requesting shell...
[SSH] ??Shell created successfully
[SSH] Using custom command: top -n 1
[SSH] Writing command to stream: top -n 1
[SSH] Command sent, waiting for log data...
ç‡§ë†…íˆ˜  [END TEST]   "should execute arbitrary user provided command (e.g. top)"


ç‡§ë‰›íˆ˜  [START TEST] "should substitute $(TAGS) with space-joined tags in SSH command"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SSH] ========== SSH Connection Request ==========
[SSH] Connection initiated with params: {
  host: '1.2.3.4',
  port: undefined,
  username: 'testuser',
  passwordProvided: false,
  debug: undefined,
  saveToFile: undefined,
  command: 'logger-mgr --filter $(TAGS); dlogutil -v kerneltime $(TAGS) &',
  tags: [ 'AudioPolicy', 'AudioFlinger' ]
}
[SSH] Substituted $(TAGS) -> "AudioPolicy AudioFlinger"
[SSH] Effective command: logger-mgr --filter AudioPolicy AudioFlinger; dlogutil -v kerneltime AudioPolicy AudioFlinger &
[SSH] Closing existing SSH connection...
[SSH] Creating SSH client...
[SSH] Connection attempt started...
[SSH] ??SSH connection ready, requesting shell...
[SSH] ??Shell created successfully
[SSH] Using custom command: logger-mgr --filter AudioPolicy AudioFlinger; dlogutil -v kerneltime AudioPolicy AudioFlinger &
[SSH] Writing command to stream: logger-mgr --filter AudioPolicy AudioFlinger; dlogutil -v kerneltime AudioPolicy AudioFlinger &
[SSH] Command sent, waiting for log data...
ç‡§ë†…íˆ˜  [END TEST]   "should substitute $(TAGS) with space-joined tags in SSH command"


ç‡§ë‰›íˆ˜  [START TEST] "should apply tags to DEFAULT SSH command if no command provided"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SSH] ========== SSH Connection Request ==========
[SSH] Connection initiated with params: {
  host: '1.2.3.4',
  port: undefined,
  username: 'testuser',
  passwordProvided: false,
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -c;logger-mgr --filter $(TAGS); dlogutil -v kerneltime $(TAGS) &',
  tags: [ 'SystemUI' ]
}
[SSH] Substituted $(TAGS) -> "SystemUI"
[SSH] Effective command: dlogutil -c;logger-mgr --filter SystemUI; dlogutil -v kerneltime SystemUI &
[SSH] Closing existing SSH connection...
[SSH] Creating SSH client...
[SSH] Connection attempt started...
[SSH] ??SSH connection ready, requesting shell...
[SSH] ??Shell created successfully
[SSH] Using custom command: dlogutil -c;logger-mgr --filter SystemUI; dlogutil -v kerneltime SystemUI &
[SSH] Writing command to stream: dlogutil -c;logger-mgr --filter SystemUI; dlogutil -v kerneltime SystemUI &
[SSH] Command sent, waiting for log data...
ç‡§ë†…íˆ˜  [END TEST]   "should apply tags to DEFAULT SSH command if no command provided"


ç‡§ë‰›íˆ˜  [START TEST] "should emit log_data when stream outputs data"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SSH] ========== SSH Connection Request ==========
[SSH] Connection initiated with params: {
  host: '1.2.3.4',
  port: undefined,
  username: 'testuser',
  passwordProvided: false,
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -c;logger-mgr --filter $(TAGS); dlogutil -v kerneltime $(TAGS) &',
  tags: []
}
[SSH] Substituted $(TAGS) -> ""
[SSH] Effective command: dlogutil -c;logger-mgr --filter ; dlogutil -v kerneltime  &
[SSH] Closing existing SSH connection...
[SSH] Creating SSH client...
[SSH] Connection attempt started...
[SSH] ??SSH connection ready, requesting shell...
[SSH] ??Shell created successfully
[SSH] Using custom command: dlogutil -c;logger-mgr --filter ; dlogutil -v kerneltime  &
[SSH] Writing command to stream: dlogutil -c;logger-mgr --filter ; dlogutil -v kerneltime  &
[SSH] Command sent, waiting for log data...
[SSH] ??First data received: 12 bytes
[SSH] First data preview: SSH Log Line
ç‡§ë†…íˆ˜  [END TEST]   "should emit log_data when stream outputs data"


ç‡§ë‰›íˆ˜  [START TEST] "should emit ssh_error on connection failure"
SERVER_STARTUP: BLOCK_TEST_DIR = K:\Antigravity_Projects\gitbase\happytool_electron\BlockTest
[SSH] ========== SSH Connection Request ==========
[SSH] Connection initiated with params: {
  host: '1.2.3.4',
  port: undefined,
  username: 'testuser',
  passwordProvided: false,
  debug: undefined,
  saveToFile: undefined,
  command: 'dlogutil -c;logger-mgr --filter $(TAGS); dlogutil -v kerneltime $(TAGS) &',
  tags: []
}
[SSH] Substituted $(TAGS) -> ""
[SSH] Effective command: dlogutil -c;logger-mgr --filter ; dlogutil -v kerneltime  &
[SSH] Closing existing SSH connection...
[SSH] Creating SSH client...
[SSH] Connection attempt started...
stderr | test/server_socket.test.js > Server Socket Connection > SSH Connection > should emit ssh_error on connection failure
[SSH] ??Connection Error: Error: Authentication failed
    at K:/Antigravity_Projects/gitbase/happytool_electron/test/server_socket.test.js:302:45
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1206:10)
    at file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1650:37
ç‡§ë†…íˆ˜  [END TEST]   "should emit ssh_error on connection failure"

    at Traces.$ (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)
    at runTest (file:///K:/Antigravity_Projects/gitbase/happytool_electron/node_modules/@vitest/runner/dist/index.js:1650:12)
[SSH] Error details: {
  message: 'Authentication failed',
  code: undefined,
  level: undefined,
  errno: undefined
}

 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should execute default command (dlogutil -v kerneltime) if none provided 3ms
 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should execute user provided command (e.g. ls -al) 1ms
 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should execute complex user provided command (e.g. ps -ef | grep process) 0ms
 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should substitute $(TAGS) with space-joined tags in SDB command 0ms
 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should apply tags to DEFAULT SDB command if no command provided 0ms
 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should emit log_data when process writes to stdout 1ms
 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should emit sdb_error when process encounters error 4ms
 ??test/server_socket.test.js > Server Socket Connection > SDB Connection > should kill existing process before starting new one 1ms
 ??test/server_socket.test.js > Server Socket Connection > SSH Connection > should execute default command (dlogutil -v kerneltime) if none provided 2ms
 ??test/server_socket.test.js > Server Socket Connection > SSH Connection > should execute user provided command (e.g. tail -f ...) 1ms
 ??test/server_socket.test.js > Server Socket Connection > SSH Connection > should execute arbitrary user provided command (e.g. top) 0ms
 ??test/server_socket.test.js > Server Socket Connection > SSH Connection > should substitute $(TAGS) with space-joined tags in SSH command 1ms
 ??test/server_socket.test.js > Server Socket Connection > SSH Connection > should apply tags to DEFAULT SSH command if no command provided 0ms
 ??test/server_socket.test.js > Server Socket Connection > SSH Connection > should emit log_data when stream outputs data 1ms
 ??test/server_socket.test.js > Server Socket Connection > SSH Connection > should emit ssh_error on connection failure 1ms

 Test Files  2 passed (2)
      Tests  24 passed (24)
   Start at  04:06:09
   Duration  1.20s (transform 181ms, setup 141ms, import 587ms, tests 115ms, environment 1.07s)

